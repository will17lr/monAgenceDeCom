<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Produit Tech — monAgenceDeCom</title>
  <meta name="description" content="Landing page interactive pour le lancement d’un produit tech." />

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />

  <!-- CSS principal -->
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <noscript>Activez JavaScript pour profiter des interactions.</noscript>

  <!-- ========================= HEADER ========================= -->
  <header class="site-header" role="banner">
    <a class="skip-link" href="#main">Aller au contenu</a>
    <div class="container">
      <h1 class="site-title">Produit Tech</h1>

      <nav class="site-nav" aria-label="Navigation principale" id="mainNav">
        <button class="nav-toggle" aria-controls="mainNavList" aria-expanded="false" id="navToggle" title="Menu">☰</button>
        <ul id="mainNavList">
          <li><a href="#reviews">Avis</a></li>
          <li><a href="#prix">Simulateur de prix</a></li>
          <li><a href="#faq">FAQ</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main" class="site-main" role="main">
    <!-- ========================= SECTION AVIS ========================= -->
    <section id="reviews" class="section section-reviews" aria-labelledby="reviews-title">
      <div class="container">
        <h2 id="reviews-title">Avis clients</h2>

        <!-- Liste d’avis (remplie dynamiquement) -->
        <div id="reviews-list" class="reviews__list" role="list"></div>

        <!-- Formulaire d’ajout d’avis -->
        <form id="review-form" class="reviews__form" novalidate>
          <fieldset>
            <legend>Ajouter un avis</legend>

            <div class="form__row">
              <label for="review-author">Votre nom</label>
              <input id="review-author" name="author" type="text" required />
            </div>

            <div class="form__row">
              <label for="review-rating">Note</label>
              <select id="review-rating" name="rating" required>
                <option value="" selected disabled>Choisir une note</option>
                <option value="5">★★★★★ (5)</option>
                <option value="4">★★★★☆ (4)</option>
                <option value="3">★★★☆☆ (3)</option>
                <option value="2">★★☆☆☆ (2)</option>
                <option value="1">★☆☆☆☆ (1)</option>
              </select>
            </div>

            <div class="form__row">
              <label for="review-content">Votre avis</label>
              <textarea id="review-content" name="content" rows="3" required></textarea>
            </div>

            <button type="submit" class="btn">Publier l’avis</button>
          </fieldset>
          <p class="form__feedback" id="review-feedback" aria-live="polite"></p>
        </form>
      </div>

      <!-- Template pour un avis (cloné en JS) -->
      <template id="review-template">
        <article class="review" role="listitem">
          <header class="review__header">
            <strong class="review__author"></strong>
            <span class="review__rating" aria-label="Note"></span>
          </header>
          <p class="review__content"></p>
          <button type="button" class="review__delete" aria-label="Supprimer cet avis">Supprimer</button>
        </article>
      </template>
    </section>

    <!-- ==================== SECTION SIMULATEUR DE PRIX ==================== -->
    <section id="prix" class="section section-simulator" aria-labelledby="prix-title">
      <div class="container">
        <h2 id="prix-title">Simulateur de prix</h2>

        <form id="price-form" class="price__form">
          <!-- Couleurs -->
          <fieldset>
            <legend>Couleur</legend>
            <div id="couleurs-container" class="choices"></div>
          </fieldset>

          <!-- Versions -->
          <div class="field">
            <label for="version-select">Version</label>
            <select id="version-select" required></select>
          </div>

          <!-- Options -->
          <fieldset>
            <legend>Options</legend>
            <div id="options-container" class="choices"></div>
          </fieldset>

          <!-- Total -->
          <div class="price__total">
            <span>Total :</span>
            <strong id="total-price">0 €</strong>
          </div>

          <!-- Reset-->
          <button type="reset" id="price-reset" class="btn btn--ghost">Réinitialiser</button>
        </form>
      </div>
    </section>

    <!-- ========================= SECTION FAQ ========================= -->
    <section id="faq" class="section section-faq" aria-labelledby="faq-title">
      <div class="container">
        <h2 id="faq-title">FAQ</h2>

        <!-- Liste rendue par JS -->
        <div id="faqContainer" class="faq__list" role="list"></div>

        <!-- Formulaire centré et élargi comme Contact -->
        <form id="faqForm" class="faq-form mt-4" novalidate>
          <div class="mb-3">
            <label for="questionInput" class="form-label">Posez votre question</label>
            <textarea
              id="questionInput"
              name="questionInput"
              class="form-control"
              rows="5"
              placeholder="Décrivez votre question le plus clairement possible…"
              required
            ></textarea>
            <div class="form-text">Évitez les données sensibles. Une réponse sera ajoutée dans la FAQ.</div>
          </div>

          <div class="d-grid">
            <button type="submit" id="submit" class="btn btn-primary btn-animate">Ajouter</button>
          </div>

          <p id="faqFeedback" class="form__feedback" aria-live="polite" role="status"></p>
        </form>

        <!-- Template FAQ item -->
        <template id="faq-item-template">
          <article class="faq__item" role="listitem">
            <h3 class="faq__question-wrapper">
              <button type="button" class="faq__question" aria-expanded="false" aria-controls="faq-panel-{{id}}">
                <span class="faq__q-text"></span>
                <span class="faq__icon" aria-hidden="true">▸</span>
              </button>
            </h3>
            <div id="faq-panel-{{id}}" class="faq__answer" hidden>
              <p class="faq__a-text"></p>
            </div>
          </article>
        </template>
      </div>
    </section>

    <!-- ===================== SECTION CONTACT ===================== -->
    <section id="contact" class="bg-white" aria-labelledby="contact-title">
      <div class="container py-5">
        <h2 id="contact-title">Contact</h2>
        <p class="form-text">
          Besoin d’un conseil ? Joignez votre CV (PDF) ou une image (JPG/PNG) si utile.
        </p>

        <form id="contactForm" action="#" enctype="multipart/form-data" novalidate>
          <div class="mb-4">
            <label for="name" class="form-label">Votre nom</label>
            <input type="text" id="name" name="name" class="form-control" placeholder="John Doe" required>
          </div>

          <div class="mb-4">
            <label for="email" class="form-label">Votre email</label>
            <input type="email" id="email" name="email" class="form-control" placeholder="exemple@hotmail.fr" required>
          </div>

          <div class="mb-4">
            <label for="message" class="form-label">Votre message</label>
            <textarea id="message" name="message" rows="5" class="form-control" placeholder="Laissez un commentaire..." required></textarea>
          </div>

          <div class="mb-3">
            <label for="attachment" class="form-label">Pièce jointe (PDF, JPG, PNG) — max 5 Mo</label>
            <input type="file" id="attachment" name="attachment" class="form-control"
              accept=".pdf,.jpg,.jpeg,.png,application/pdf,image/jpeg,image/png" />
            <div id="fileHelp" class="form-text">
              Extensions autorisées : .pdf, .jpg, .png (taille ≤ 5 Mo).
            </div>
          </div>

          <div class="d-grid gap-2">
            <button type="submit" id="contactSubmit" class="btn btn-primary btn-animate">
              Envoyer le message
            </button>
          </div>

          <!-- Feedback accessible -->
          <p id="contactFeedback" class="form__feedback" aria-live="polite" role="status"></p>
        </form>
      </div>
    </section>
  </main>

  <!-- ========================= FOOTER ========================= -->
  <footer class="site-footer" role="contentinfo">
    <div class="container">
      <div class="footer__top">
        <p class="footer__brand">Produit Tech</p>
      </div>
      <div class="footer__bottom">
        <p class="footer__copy">© <span id="year"></span> monAgenceDeCom — Tous droits réservés.</p>
        <a href="#main" class="footer__toplink" title="Revenir en haut">Haut de page ↑</a>
      </div>
    </div>
  </footer>

  <!-- ========================= SCRIPTS ========================= -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous">
  </script>

  <!-- Features -->
  <script defer src="js/reviews.js"></script>
  <script defer src="js/price.js"></script>
  <script defer src="js/faq.js"></script>
  <script defer src="js/contact.js"></script>

  <!-- Utilitaire année -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const y = document.getElementById("year");
      if (y) y.textContent = new Date().getFullYear();
    });
  </script>

  <!-- Burger + lien actif -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Burger
      const nav = document.getElementById('mainNav');
      const btn = document.getElementById('navToggle');
      const list = document.getElementById('mainNavList');

      if (btn) {
        btn.addEventListener('click', () => {
          const open = nav.classList.toggle('is-open');
          btn.setAttribute('aria-expanded', String(open));
        });
        list?.addEventListener('click', (e) => {
          if (e.target.closest('a') && nav.classList.contains('is-open')) {
            nav.classList.remove('is-open');
            btn.setAttribute('aria-expanded','false');
          }
        });
      }

      // Lien actif au scroll
      const links = [...document.querySelectorAll('.site-nav a[href^="#"]')];
      const sections = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);

      const setActive = () => {
        let currentId = sections[0]?.id;
        const headerH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-h')) || 64;
        const y = window.scrollY + headerH + 24;
        for (const sec of sections) {
          if (sec.offsetTop <= y) currentId = sec.id;
        }
        links.forEach(a =>
          a.classList.toggle('is-active', a.getAttribute('href') === `#${currentId}`)
        );
      };

      window.addEventListener('scroll', setActive, { passive: true });
      window.addEventListener('resize', setActive);
      setActive();
    });
      </script>
      <script defer src="js/contact.js?v=2"></script>
</body>
</html>
